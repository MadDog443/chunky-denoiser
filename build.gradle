apply plugin: 'java'

if (project.hasProperty("chunky2")) {
	task generateSources(type: Copy) {
		from 'src/chunky-2/java'
		into "$buildDir/generated-src"
	}
} else {
	task generateSources(type: Copy) {
		from 'src/chunky-1/java'
		into "$buildDir/generated-src"
	}
}

sourceSets.main.java.srcDirs = ["$buildDir/generated-src", "src/main/java"]
compileJava.dependsOn generateSources

repositories {
	mavenLocal()
	mavenCentral()
	maven {
		url 'https://oss.sonatype.org/content/repositories/snapshots/'
	}
}

sourceCompatibility = '1.8'
targetCompatibility = '1.8'

dependencies {
	if (project.hasProperty("chunky2")) {
		compile 'se.llbit:chunky-core:2.0-beta6'
	} else {
		compile 'se.llbit:chunky-core:1.4.5'
	}
	compile 'org.apache.commons:commons-math3:3.2'
}

defaultTasks 'jar'
